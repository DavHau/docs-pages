<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `hash_entry` fn in crate `hdk3`."><meta name="keywords" content="rust, rustlang, rust-lang, hash_entry"><title>hdk3::entry::hash_entry::hash_entry - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled ><script src="../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc fn"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../hdk3/index.html'><div class='logo-container rust-logo'><img src='../../../rust-logo.png' alt='logo'></div></a><div class="sidebar-elems"><p class='location'><a href='../../index.html'>hdk3</a>::<wbr><a href='../index.html'>entry</a>::<wbr><a href='index.html'>hash_entry</a></p><script>window.sidebarCurrent = {name: 'hash_entry', ty: 'fn', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><span class="help-button">?</span>
                <a id="settings-menu" href="../../../settings.html"><img src="../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../../src/hdk3/entry/hash_entry.rs.html#42-48' title='goto source code'>[src]</a></span><span class='in-band'>Function <a href='../../index.html'>hdk3</a>::<wbr><a href='../index.html'>entry</a>::<wbr><a href='index.html'>hash_entry</a>::<wbr><a class="fn" href=''>hash_entry</a></span></h1><pre class='rust fn'>pub fn hash_entry&lt;I, E&gt;(input: I) -&gt; <a class="type" href="../../../hdk3/map_extern/type.ExternResult.html" title="type hdk3::map_extern::ExternResult">ExternResult</a>&lt;<a class="type" href="../../../hdk3/prelude/type.EntryHash.html" title="type hdk3::prelude::EntryHash">EntryHash</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;<a class="enum" href="../../../hdk3/prelude/enum.Entry.html" title="enum hdk3::prelude::Entry">Entry</a>: <a class="trait" href="../../../hdk3/prelude/trait.TryFrom.html" title="trait hdk3::prelude::TryFrom">TryFrom</a>&lt;I, Error = E&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a class="enum" href="../../../hdk3/prelude/enum.WasmError.html" title="enum hdk3::prelude::WasmError">WasmError</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;E&gt;,&nbsp;</span></pre><div class='docblock'><p>Hash anything that that implements TryInto<Entry>.</p>
<p>Hashes are typed in holochain, e.g. HeaderHash and EntryHash are different and yield different
bytes for a given value. This ensures correctness and allows type based dispatch in various
areas of the codebase.</p>
<p>Usually you want to hash a value that you want to reference on the DHT with <code>get</code> etc. because
it represents some domain-specific data sourced externally or generated within the wasm.
HeaderHash hashes are <em>always</em> generated by the process of committing something to a local
chain. Every host function that commits an entry returns the new HeaderHash. The HeaderHash can
also be used with <code>get</code> etc. to retreive a <em>specific</em> element from the DHT rather than the
oldest live element.
However there is no way to <em>generate</em> a header hash directly from a header from inside wasm.
Element values (entry+header pairs returned by <code>get</code> etc.) contain prehashed header structs
called HeaderHashed, which is alongside the &quot;raw&quot; Header value. Generally the pre-hashing is
more efficient than hashing headers ad-hoc as hashing always needs to be done at the database
layer, so we want to re-use that as much as possible.
The header hash can be extracted from the Element as <code>element.header_hashed().as_hash()</code>.
@todo is there any use-case that can't be satisfied by the <code>header_hashed</code> approach?</p>
<p>Anything that is annotated with #[hdk_entry( .. )] or entry_def!( .. ) implements this so is
compatible automatically.</p>
<p>hash_entry is &quot;dumb&quot; in that it doesn't check the entry is defined, committed, on the DHT or
any other validation, it simply generates the hash for the serialized representation of
something in the same way that the DHT would.</p>
<p>It is strongly recommended that you use the <code>hash_entry</code> function to calculate hashes to avoid
inconsistencies between hashes in the wasm guest and the host.
For example, a lot of the crypto crates in rust compile to wasm so in theory could generate the
hash in the guest, but there is the potential that the serialization logic could be slightly
different, etc.</p>

<div class='information'><div class='tooltip ignore'>ⓘ<span class='tooltiptext'>This example is not tested</span></div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore">
<span class="attribute">#[<span class="ident">hdk_entry</span>(<span class="ident">id</span><span class="op">=</span><span class="string">&quot;foo&quot;</span>)]</span>
<span class="kw">struct</span> <span class="ident">Foo</span>;

<span class="kw">let</span> <span class="ident">foo_hash</span> <span class="op">=</span> <span class="ident">hash_entry</span>(<span class="ident">Foo</span>)<span class="question-mark">?</span>;</pre></div>
</div></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../";window.currentCrate = "hdk3";</script><script src="../../../main.js"></script><script defer src="../../../search-index.js"></script></body></html>