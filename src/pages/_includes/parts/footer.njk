{% from "widgets/svg-icons.njk" import discordMarkIcon, twitterLogo, githubLogo, youtubeMarkIcon %}

{% macro footerLink(link) %}
  {% set classAttr = 'class="'+ link.class + '"' if link.class else '' %}
  <li>
  {% if link.type === "icon-list" %}
    <ul class="{{ link.class }}">
    {% for childLink in link.links %}
      {% set childClassAttr = 'class="'+ childLink.class + '"' if childLink.class else '' %}
      <li>
        <a href="{{ childLink.url }}" {{ 'target=_blank' if childLink.external }} {{ childClassAttr | safe }} >
          {{ callMacroByName(childLink.svgSnippet) }}
        </a>
      </li>
    {% endfor %}
    </ul>
  {% else %}
      {% if link.image %}
      <a href="{{ link.url }}" title="{{ link.title }}" {{ 'target=_blank' if link.external }} {{ classAttr | safe }}>
        <img src="{{ link.image }}" />
      </a>
      {% elif link.url  %}
      <a href="{{ link.url }}" {{ 'target=_blank' if link.external }} {{ classAttr | safe }}>{{ link.title }}</a>
      {% else %}
      {# Just some text #}
      <span>{{ link.title }}</span>
      {% endif %}
  {% endif %}
  </li>
{% endmacro %}

<div id="page-footer">
  <nav>
    <div id="page-footer-columns">
    {% for col in navigation.footerNav.columns %}
      <div class="nav-column {{col.class}}">
        {% if col.title %}
        <h2>{{ col.title }}</h2>
        {% endif %}
        
        <ul>
        {% for link in col.links %}
          {{ footerLink(link) }}
        {% endfor %}
        </ul>
      </div>
    {% endfor %}

      <div class="nav-column">
        <h2>Newsletter</h2>
        <p>
          Subscribe to the Holochain newsletter to hear about updates and events.
        </p>
        <a href="" class="btn">Subscribe</a>
      </div>
    </div>
    
    <hr>

    <div id="page-footer-bottom">
      <ul>
      {% for link in navigation.footerNav.bottomRow.links %}
        {{ footerLink(link) }}
      {% endfor %}
      </ul>
    </div>
  </nav>
</div>